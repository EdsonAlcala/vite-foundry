# Build On Base Boilerplate (BoBB)

Simple, minimalistic and opinionated [Next.js] + [Foundry] boilerplate to start developing Onchain Apps on Base.

This boilerplate is designed to work with the following stack:

- [Foundry]
- [Next.js] - Next.js 14.0.2, with App router
- [Anvil]
- [RainbowKit]
- [Op-Wagmi]

## Features

- Automatic React hooks generation ([see guide below](#automatic-react-hooks-generation))
- Wallet integration with [RainbowKit]
- Next.JS app router integration
- Bring your own UI framework
- [Tailwind CSS] integration

## Requirements

- [NVM]
- [Yarn] # Once you run `nvm use` install it globally via `corepack enable`
- [Foundry]
- [Alchemy provider]
- [Wallet connect id]

*Note: Since WalletConnect requires a projectId and it is free and easy to get, we recommend getting a projectId from WalletConnect Cloud.

## Architecture ðŸ“¦

The project consist of 2 packages:

- [App](./packages/app) - Next.js 14.0.2, with App router
- [Foundry](./packages/foundry/) - Smart contract project

## Getting started

1. Clone the repository and install dependencies

```bash
$ git clone https://github.com/edsonalcala/dapp-boilerplate

$ nvm use

$ yarn 
```

2. Set values in the `.env` file. You will need:

```bash
MNEMONIC
BASESCAN_API_KEY
CHAIN_ID
NEXT_PUBLIC_WALLET_CONNECT_ID
NEXT_PUBLIC_ALCHEMY_ID
```

Check the `.env.sample` file that includes some default values.

In order to get a BaseScan API Key, please refer to [this guide].

3. Start Anvil by running:

```bash
yarn chain
```

4. On a second terminal, deploy the smart contracts contract to the local `Anvil` instance by running:

```bash
yarn deploy
```

5. On a new terminal, start the NextJS app by running:

```bash
yarn dev
```

## Automatic React hooks generation

This boilerplate contains a `Wagmi` integration that automatically generates `React hooks`, so you don't need to copy ABIs anymore or addresses from your deployed contracts. You can see an example in `app/src/views/ConnectedView.tsx`, where we read the value of the `storedData` of the `SimpleStorage` contract via:

```Typescript
const { data: simpleStorageValue } = useSimpleStorageRead({
  functionName: 'storedData'
})
```

Notice the hook import:

```Typescript
import { useSimpleStorageRead } from '@app/generated'
```

The hooks generated are in the `app/src/generated.ts` file. You can customise this output path in the `wagmi.config.ts`.

```Typescript
export default defineConfig({
  out: 'src/generated.ts',
  plugins: [
    foundry({
      project: '../foundry',
      deployments: require('../foundry/deployments/deploymentAddresses.json')
    }),
    react()
  ],
})
```

The `wagmi.config.ts` also contains a reference to the `deploymentAddresses.json`. This file is required in order to generate the React hooks and is generated by the `Deploy.s.sol` file in the foundry project.

However, in order to generate this file we need to explicitly tell to our solidity script to do the exporting.

The `foundry/script/Deploy.s.sol` contains at the end of the `run` function the following:

```Javascript
_startExport();
_addExport("SimpleStorage", address(simpleStorage));
_stopExport();
```

With these lines of code we are explicitly exporting into the `deploymentAddresses.json` the name of the contract with its respective address per network.

```json
{
  "SimpleStorage": {
    "31337": "0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9"
  }
}
```

If you need to add more contracts, you will do it as:

```Javascript
_startExport();
_addExport("Contract1", address(contract1));
_addExport("Contract2", address(contract2));
_addExport("Contract3", address(contract3));
_stopExport();
```

## Roadmap

[ ] Add deploy to vercel button

[ ] Add support for op-wagmi

[ ] Integrate [React hot toast] or [React toastify]

## Inspiration

- [Scaffold-eth-2](https://github.com/scaffold-eth/scaffold-eth-2)
- [Nexth](https://github.com/wslyvh/nexth)
- [Nomad](https://github.com/nomad-xyz/monorepo)
- [Prb-Math](https://github.com/PaulRBerg/prb-math)
- [Optimism Starter](https://github.com/ethereum-optimism/optimism-starter)

<!-- ## References -->

[Next.js]: https://nextjs.org/docs/getting-started/installation
[RainbowKit]: https://www.rainbowkit.com/docs/installation#further-examples
[Tailwind]: https://tailwindui.com/
[NVM]: https://github.com/nvm-sh/nvm
[Yarn]: https://yarnpkg.com/
[Foundry]: https://github.com/foundry-rs/foundry
[Alchemy provider]: https://www.alchemy.com/
[Wallet connect id]: https://cloud.walletconnect.com/sign-in
[Rivet]: https://www.paradigm.xyz/2023/08/rivet
[React toastify]: https://www.npmjs.com/package/react-toastify
[React hot toast]: https://react-hot-toast.com/
[Anvil]: https://book.getfoundry.sh/reference/anvil/
[Op-Wagmi]: https://github.com/base-org/op-wagmi
[Tailwind Css]: https://tailwindcss.com/
[this guide]: https://docs.basescan.org/getting-started/viewing-api-usage-statistics
